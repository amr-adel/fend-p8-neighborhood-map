(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports=a(29)},22:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(11),o=a.n(r),s=(a(22),a(1)),i=a(2),c=a(5),d=a(3),u=a(6),f=a(4),m=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(i.a)(t,[{key:"filter",value:function(e){var t=this.props,a=t.filter,n=t.selectMall;a(e),n(null)}},{key:"hideInfo",value:function(){var e=document.getElementsByClassName("selected");0!==e.length&&e[0].classList.remove("selected")}},{key:"fetchFourSquare",value:function(e){var t=this;fetch("https://api.foursquare.com/v2/venues/".concat(e,"?client_id=N0UR5Z3XKXDNY4GWMBV4H4J0VZIHDCKLUZIZ0U4RBNLAE1CG&client_secret=LVDZ0NKPQVY1SMUFSVJJT02ARZOJXWUFMIJ1AZ0ACSLMKNHR&v=20180620")).then(function(e){return e.json()}).then(function(e){return t.detailsOutput(e)}).catch(function(e){return alert("Unable to get data from FourSquare (".concat(e,")"))})}},{key:"detailsOutput",value:function(e){if(e.response.venue){var t=e.response.venue,a=t.bestPhoto,n=t.name,l=t.ratingColor,r=t.rating,o=t.location,s=t.likes,i=t.canonicalUrl,c=t.id,d='\n                <img class="photo" src="'.concat(a.prefix,"500x300").concat(a.suffix,'" alt="').concat(n,'" onload="this.parentElement.parentElement.scrollIntoView()">\n                <div class="rating" style="color: #').concat(l,';">').concat(r,'</div>\n                <div class="address"><svg><use xlink:href="./icons.svg#marker"></use></svg>').concat(o.formattedAddress[0],'</div>\n                <div class="status"><svg><use xlink:href="./icons.svg#like"></use></svg>Liked by ').concat(s.count,' user</div>\n                <a class="link" href="').concat(i,'" target="_blank" rel="noopener noreferrer">More on FourSquare<svg><use xlink:href="./icons.svg#link"></use></svg></a>\n            ');document.querySelector("#fs".concat(c," .details")).innerHTML=d}else alert("Unable to get details from FourSquare (".concat(e.meta.errorDetail,")"))}},{key:"componentDidUpdate",value:function(e){var t=this.props.selected;if(e.selected===t)return!1;this.hideInfo(),null!==t&&(this.fetchFourSquare(t.fsId),document.getElementById("fs"+t.fsId).classList.add("selected"))}},{key:"selectMall",value:function(e,t){var a=this.props,n=a.selected,l=a.selectMall;if("SPAN"===t)l(null);else{if(n===e)return!1;l(e)}}},{key:"render",value:function(){var e=this,t=this.props.filteredMalls;return l.a.createElement("section",{className:"sidebar"},l.a.createElement("header",{className:"header"},l.a.createElement("div",{className:"brand"},l.a.createElement("h1",null,l.a.createElement("svg",{className:"logo"},l.a.createElement("use",{xlinkHref:"./icons.svg#bag"})),"Malls",l.a.createElement("span",null,"Of"),"Cairo"))),l.a.createElement("input",{type:"text",className:"filter",placeholder:"Filter Places","aria-label":"Filter",onChange:function(t){return e.filter(t.target.value)}}),l.a.createElement("ol",{className:"places"},t.length>0?t.map(function(t){return l.a.createElement("li",{key:t.fsId,className:"place",role:"button",tabIndex:"0",id:"fs".concat(t.fsId),onClick:function(a){return e.selectMall(t,a.target.tagName)},onKeyPress:function(a){return e.selectMall(t,a.target.tagName)}},l.a.createElement("h4",{className:"name"},t.name),l.a.createElement("span",{className:"close","aria-label":"Close",role:"button",tabIndex:"0"},"X"),l.a.createElement("div",{className:"details"},"Loading mall details..."))}):l.a.createElement("li",{className:"place",key:"no-match"},l.a.createElement("h4",{className:"name"},"Unfortunately, your keyword doesn't match any of the listed malls."))),l.a.createElement("footer",{className:"footer",id:"footer"},l.a.createElement("div",{className:"footer__follow"},l.a.createElement("a",{href:"https://twitter.com/fullstackamr/",target:"_blank",rel:"noopener noreferrer"},l.a.createElement("svg",null,l.a.createElement("use",{xlinkHref:"./icons.svg#twitter"}))),l.a.createElement("a",{href:"https://github.com/amr-adel/",target:"_blank",rel:"noopener noreferrer"},l.a.createElement("svg",null,l.a.createElement("use",{xlinkHref:"./icons.svg#github"}))),l.a.createElement("a",{href:"https://www.linkedin.com/in/amr-abdelmoez/",target:"_blank",rel:"noopener noreferrer"},l.a.createElement("svg",null,l.a.createElement("use",{xlinkHref:"./icons.svg#linkedin"}))),l.a.createElement("a",{href:"https://codepen.io/amr-adel/",target:"_blank",rel:"noopener noreferrer"},l.a.createElement("svg",null,l.a.createElement("use",{xlinkHref:"./icons.svg#codepen"}))))))}}]),t}(n.Component),p={malls:[{name:"Mall of Arabia",gmapId:"ChIJeZAyaVFXWBQRD4a_Vq4vVvg",coor:{lat:30.0062993,lng:30.97348050000005},fsId:"4e64d41e483bd9a975557768"},{name:"Cairo Festival City Mall",gmapId:"ChIJYQYFKvE8WBQRIJRXhDyYEYE",coor:{lat:30.0319579,lng:31.408473100000037},fsId:"5268f5d2498ee025c2cb6794"},{name:"Downtown Mall",gmapId:"ChIJ98iK8-88WBQR_RBD6r2sO2A",coor:{lat:30.0174272,lng:31.412420500000053},fsId:"4d5d3a959ac9a09369027994"},{name:"Americana Plaza",gmapId:"ChIJ4wWsX2paWBQRGPkCKzwfhy0",coor:{lat:30.0275716,lng:31.013195600000017},fsId:"507d61dfe4b087a6ab444d33"},{name:"Citystars Mall",gmapId:"ChIJo0ecE_gVWBQRGGrouhZFdME",coor:{lat:30.072979,lng:31.34604999999999},fsId:"4b853e48f964a520845231e3"},{name:"Sun City Mall",gmapId:"ChIJmVTb2UUWWBQRjnpeYIqBncQ",coor:{lat:30.102616,lng:31.38614480000001},fsId:"53e0e485498e46a6b3609b09"},{name:"Mall Of Egypt",gmapId:"ChIJGfFdneZQWBQRoFxwQ5okV14",coor:{lat:29.9722532,lng:31.017524399999957},fsId:"519dcd44498e2ebd18d8e1d2"},{name:"First Mall",gmapId:"ChIJnQUHZCdHWBQRDaAJ6j1aog0",coor:{lat:30.0242101,lng:31.217196400000034},fsId:"4c72eb0457b6a143e8d1c6cc"},{name:"Nile City Towers",gmapId:"ChIJUTumGvpAWBQRdeaHrFtl1HM",coor:{lat:30.0715475,lng:31.22782559999996},fsId:"4ce9181ae888f04d3e2f466b"},{name:"Porto Cairo Mall",gmapId:"ChIJ5_bMsF89WBQRM7-YOesuHM8",coor:{lat:30.0644511,lng:31.42453690000002},fsId:"4fb8a611e4b04abc0c11d4bc"},{name:"Genena Mall",gmapId:"ChIJa_i0F2g-WBQRr7xwkbhUzpw",coor:{lat:30.0610462,lng:31.3299931},fsId:"4c4bedd8712ac9282981976d"},{name:"Arkadia Mall",gmapId:"ChIJNXz3ZvpAWBQRtbdRovhD6aQ",coor:{lat:30.069613349999997,lng:31.227202691153604},fsId:"50dc283de4b057fecdd1e610"},{name:"Tiba Outlet Mall",gmapId:"ChIJj1eMyEE-WBQRqOFFesZ-c7o",coor:{lat:30.06734595,lng:31.32987509169704},fsId:"4e31e68cb0fbb985a508ee47"},{name:"Cairo Mall",gmapId:"ChIJAQAAAJxFWBQRCmuO5k3gAb8",coor:{lat:29.9986787,lng:31.1735371},fsId:"4e725f2f183821b8cc96fdac"},{name:"Talaat Harb Mall",gmapId:"ChIJb1BvepVAWBQRY6OnzlEYbZI",coor:{lat:30.05016095,lng:31.239893859811517},fsId:"4ec14a6b5c5c3d470d610538"},{name:"City Center Mall",gmapId:"ChIJw4AoL3I-WBQRzql0xs_BnNs",coor:{lat:30.0683421,lng:31.3446867},fsId:"4bd9d7493904a5936cd4439e"},{name:"Maadi City Center",gmapId:"ChIJa31qzKhHWBQR9KlOjzqX0iM",coor:{lat:29.9825607,lng:31.3162377},fsId:"4c421543a48d9c7418c70c40"},{name:"Maadi Grand Mall",gmapId:"ChIJESyQo3M4WBQRz5lXBs5ZO5o",coor:{lat:29.964932,lng:31.2679123},fsId:"4bcb02fdcc8cd13ab88abecf"},{name:"Dandy Mall",gmapId:"ChIJ3QwL3qNbWBQR9nQCXPvj5Z0",coor:{lat:30.0633801,lng:31.0255163},fsId:"4b743b8bf964a520b9ce2de3"},{name:"Zizinia Mall",gmapId:"ChIJBYbSBnhGWBQRlRQgkTWllls",coor:{lat:29.9981988,lng:31.1690108},fsId:"55081363498ed14f195a8b16"}],mapStyles:[{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#e0efef"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:100},{visibility:"simplified"},{color:"#e6d7c5"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{visibility:"on"},{lightness:700}]},{featureType:"water",elementType:"all",stylers:[{color:"#7fc1d3"}]}]},g=a(12),h=a.n(g),v=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={map:null,bounds:null,markers:[],google:null},a.updateMarkers=function(e){var t,a=this,n=this.state,l=n.markers,r=n.google,o=n.map,s=n.bounds;l.map(function(e){return e.setMap(null)});var i=[];e.forEach(function(e){(t=new r.Marker({position:e.coor,animation:r.Animation.DROP,map:o,fsId:e.fsId})).addListener("click",function(){return a.selectMall(e)}),s.extend(e.coor),i.push(t)}),this.setState({markers:i}),o.fitBounds(s),o.setCenter(s.getCenter())},a.recenterMap=function(e){this.state.map.setZoom(15),this.state.map.setCenter(e)},a}return Object(f.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.isScriptLoaded,a=e.isScriptLoadSucceed;if(t&&!this.props.isScriptLoaded)if(a){var n=new window.google.maps.Map(document.getElementById("map"),{zoom:11,center:{lat:30.0444,lng:31.2357},styles:p.mapStyles,disableDefaultUI:!0}),l=new window.google.maps.LatLngBounds;this.setState({map:n,bounds:l,google:window.google.maps})}else alert("Unable to Load Google Maps")}},{key:"selectMall",value:function(e){e!==this.props.selected&&this.props.selectMall(e)}},{key:"componentDidUpdate",value:function(e,t){var a=this.state,n=a.markers,l=a.google,r=a.map,o=a.bounds,s=this.props,i=s.selected,c=s.filteredMalls;if(l!==t.google&&this.updateMarkers(c),null!==l&&c.length!==e.filteredMalls.length&&this.updateMarkers(c),n.map(function(e){return e.setAnimation(null)}),null!==i&&n){var d=n.map(function(e){return e.fsId}).indexOf(i.fsId);n[d].setAnimation(l.Animation.BOUNCE),this.recenterMap(i.coor)}else null!==l&&null===i&&(r.fitBounds(o),r.setCenter(o.getCenter()))}},{key:"render",value:function(){return l.a.createElement("div",{id:"map",role:"application","aria-roledescription":"map for malls list"},"Loading map...")}}]),t}(n.Component),b=h()("https://maps.googleapis.com/maps/api/js?key=AIzaSyCA5F0pGoVUQo0ZTtUInz6Kd_XfmOW3rAI")(v),I=(a(28),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).selectMall=function(e){this.setState({selected:e})},a.state={malls:p.malls.sort(function(e,t){var a=e.name.toUpperCase(),n=t.name.toUpperCase();return a.localeCompare(n)}),filteredMalls:[],selected:null},a.updateQuery=a.updateQuery.bind(Object(u.a)(a)),a.selectMall=a.selectMall.bind(Object(u.a)(a)),a}return Object(f.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({filteredMalls:this.state.malls})}},{key:"updateQuery",value:function(e){this.setState({filteredMalls:this.state.malls.filter(function(t){return-1!==t.name.toLowerCase().indexOf(e.trim().toLowerCase())})})}},{key:"render",value:function(){var e=this.state,t=e.filteredMalls,a=e.selected;return l.a.createElement("div",{className:"App"},l.a.createElement(m,{filter:this.updateQuery,selectMall:this.selectMall,selected:a,filteredMalls:t}),l.a.createElement(b,{selectMall:this.selectMall,selected:a,filteredMalls:t}))}}]),t}(n.Component)),y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function M(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(l.a.createElement(I,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/malls-of-cairo",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/malls-of-cairo","/service-worker.js");y?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):M(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):M(e)})}}()}},[[13,1,2]]]);
//# sourceMappingURL=main.2d301fe9.chunk.js.map